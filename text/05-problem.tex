\chapter{Введение в проблему синтеза маршрутов}
Следует отметить, что развитие транспортной инфраструктуры основывается на устаревших нормативах, 
не учитывающих стремительное увеличение личного транспорта и изменений функционального назначения городских 
пространств \cite{bib:1}. Это ведет к ухудшению транспортной ситуации, снижению качества транспортного 
обслуживания, увеличению пробок, и как следствие к усилению неудовлетворенности жителей. Критичным фактором 
является игнорирование фактических предпочтений жителей по перемещению по городу при проектировании маршрутов 
городского транспорта.

Для оптимизации маршрутной сети общественного транспорта необходимо проанализировать большой объем данных, 
характеризующих численность и мобильность населения, среднее время перемещения, расположение мест приложения 
труда и жилых массивов. Источниками этих данных выступают статистические сборники, выписки о численности 
сотрудников крупных предприятий, собираемые муниципальными предприятиями общественного транспорта, 
информация о количестве проданных билетах на маршрутах общественного транспорта. Для сбора данных о 
перемещениях жителей организуется целый комплекс мероприятий по натурному подсчету пассажиропотока в 
подвижном составе общественного транспорта и на остановочных пунктах существующих маршрутов, а также 
анкетированию жителей \cite{bib:2,bib:3}. Такие традиционные методы являются достаточно трудоемкими, а 
полученные данные не в полной мере отражают динамично меняющуюся ситуацию. В связи с этим, необходимо 
использовать современные технологии и новые ресурсы для получения актуальных данных о предпочтениях жителей 
по перемещениям в городе и интенсивности пассажиропотоков. Основываясь на современных подходах к анализу 
данных можно получить ценную информацию для поддержки принятия решений в процессе планирования развития 
транспортной системы города.

Следует отметить, что построение систем поддержки принятия решений рассматривается в контексте систем 
сбора, хранения и обработки данных, реализующих алгоритмы генерации информации в соответствии с различными 
уровнями представления \cite{bib:4}. В рамках данной концепции человек -- лицо принимающий решение -- 
должен быть исключен из контура оперативного управления и перемещен на уровень супервизорного управления 
\cite{bib:5}.

На основе анализа программных продуктов, специализирующихся на задачах транспортного моделирования 
(PTV Visum \cite{bib:6}, INRO Emme \cite{bib:7}, Citilabs Cube Cloud \cite{bib:8} и др.), были выявлены 
основные функции, которые в основном ориентированы на оценку качества действующей или проектируемой 
маршрутной сети.

PTV Visum (компания PTV Group): предлагает инструменты для проведения комплексного анализа действующих 
сетей, позволяет оценивать технико-экономические характеристики проектируемой сети маршрутов. На основе 
анализа матриц корреспонденций между районами, реализована возможность прогнозирования транспортного спроса, 
что помогает оценить количество необходимого подвижного состава и составить расписание его работы. 
Emme (компания INRO Software) и Cube Cloud (компания Citilabs): SaaS-программные продукты со схожей 
функциональностью.

Система транспортного анализа и симуляции (TRANSIMS) разработанное \cite{transims} представляет собой 
инструмент для анализа региональных транспортных систем. TRANSIMS это проект с открытым исходным кодом, 
который доступен для публичного использования в рамках инициативы NASA Open Source Agreement версии 1.3.

Кроме того, для развития городской транспортной сети используется программное обеспечение для моделирования 
трафика -- Aimsun позволяющая моделировать потребности в передвижениях и моделировать сети различной 
сложности\cite{aimsun}.

\section{Анализ предметной области}
Развитие городов сопряжено с модернизацией существующей сети общественного транспорта. Управление городской 
инфраструктурой или городское планирование представляет собой набор сложных процедур, где определенное 
решение может оказать сильное влияние или не удовлетворить всех жителей. Градостроительство охватывает 
транспорт, связь, распределение и проектирование сетей и многие другие для улучшения жизни людей. Новый 
вызов для быстрорастущих городов в создании более надёжной системы общественного транспорта для жителей. 
В идеале использование общественного транспорта должно уменьшить затрачиваемое время на передвижение, как 
если бы каждый отдельный человек использовал свой личный транспорт.

Часто текущие системы планирования транспортной сети не принимают во внимание реальные предпочтения 
большинства жителей. Это приводит к фундаментальным проблемам: общественным транспортом становится неудобно 
пользоваться, народ всё чаще начинает использовать личные автомобили, что приводит к потере личного времени 
на стоянии в пробках. Все эти негативные воздействия являются причиной недовольства жителей города.

В настоящее время повсеместный сбор данных и их технологии их обработки, которые становятся всё дешевле и 
дешевле, открывают новые возможности для проектировщиков. По крайней мере, большинство людей, которые 
живут в городах, имеют мобильные телефоны и смартфоны. Мобильные операторы могут отслеживать звонки людей 
и получать огромное количество данных о их перемещении. Исходя из предположения, что определенный человек 
имеет свои собственные <<шаблоны перемещения>> (часто используемые точки отправления-назначения), которые 
можно рассматривать в качестве личных транспортных предпочтениях по перемещению. Имея эти данные можно (i) 
оценить эффективность текущей транспортной сети и (ii) предложить модификацию на основе предпочтения 
граждан.

Для решения данных проблем необходимо выполнить следующие процедуры: (i) сбор данных, (ii) обработка данных, 
(iii) создание набора суб-/оптимальных маршрутов и (iv) выбор сети в соответствии с критериями качества.
Сбор данных требует методов для получения и предварительной обработки для дальнейшего эффективного хранения.
Это не обязательно сбор данных в режиме реального времени, создание моментальных <<снимков>> данных или 
дамп данных в определенный момент, для использования данных в дальнейшем. Основным моментом для сбора 
данных является обеспечение их качества, такое как детектирование пробелов в данных. Поскольку получение 
данных происходит от каждого отдельного человека, то имеем возможность оценить наиболее оптимальные места в 
качестве узловых маршрутов общественного транспорта. Допустим, мы получаем информацию о 10\% жителей город 
с 3.5 млн. населения. В этом случае матрица корреспонденции составляет \( 350 000^2 \) элементов. Уменьшение 
количества оригинальных узлов графа позволяет выявить центры кластеров и узлов, для того, чтобы понять, где 
можно разместить остановочный пункт общественного транспорта.

Следующим шагом является объединение центров кластеров для создания суб- оптимальных маршрутов сети 
общественного транспорта. Это очень сложная многокритериальная задача с множеством ограничений. Эта проблема 
лежит на пересечении проблемы поиска кратчайшего пути и задачи выбора маршрута транспортного средства с 
входным параметром пассажиропотока. Задача о поиске кратчайшего пути является наиболее известной, для которой 
есть много эффективных и быстрых программных реализаций, например Open Source Routing Machine\cite{osrm}. 
Однако, есть несколько особенностей в данной задач, такие что базовые алгоритмы не могут быть применены в 
текущем виде. В отличии от задачи о поиске кратчайшего пути с функцией затрат, рассматривается более сложная 
функция стоимости, которая включает время пешего хода, время проведённое в пути и другие количественные 
изменения. Все эти переменные являются усреднёнными по числу жителей. Кроме того, важным различием между этими 
алгоритмами является, что конечная точка в маршруте не может быть произвольной, так как каждый маршрут должен 
содержать узлы (остановки), которые представляют собой центры кластеров, определенных на предыдущем шаге.

Получение оптимальной сети общественного транспорта за один шаг является очень сложным и требует активного 
вмешательства человека. Как результат могут быть применены эволюционные алгоритмы, чтобы избежать 
дополнительных затрат на начальном этапе построения. Есть целый ряд мероприятий, связанных с предлагаемым 
подходом: (i) создать сети начальных маршрутов, (ii) изменить исходную сеть, применив операцию эволюционного 
алгоритма, такие как мутации и скрещивания; (iii) оценить существующие сети и функции затрат.

Формально данная задача связана с поиском оптимального пути на графе. Были проанализированы различные и 
широко используемые алгоритмы построения пути: \( A^\star \), \( IDA^\star \), поиск в ширину 
(Breadth-First-Search), поиск <<первый-лучший>> (Best-First-Search), алгоритм Дейкстры, двунаправленный 
\( A^\star \), Jump Point Search, Orthogonal Jump Point Search, двухэтапные алгоритмы (ALT, Reach), а 
так же генетические алгоритмы случайного поиска \cite{bib:19}.  Такие алгоритмы как \( A^\star \), 
\( IDA^\star \), <<первый-лучший>> (Best-First-Search), ALT (\( A^\star \) маркирование и метод основанный на 
неравенстве треугольников используются для работы без предварительной подготовки данных, что приводит к 
пересечению больших графов и возникновению значительных проблемам во временных затратах. В противоположность 
этим алгоритмам существуют такие как \( HLC \) (Hub Label Compression), \( HL \) (Hub Labeling), 
\( TNR \) (Transit Node Routing) и таблицы поиска, где затраты связаны с предварительно обработкой и 
хранением данных, в то время как скорость работы алгоритмов являются весьма быстрыми \cite{bib:21}.

\section{Состояние современных исследований}
Планирование и разработка транспортных сетей общественного транспорта является хорошо изученной областью.
Согласно \cite{ceder2007} методология планирования включает в себя последовательность действий: 
(i) проектирование сети общественного транспорта; (ii) установление сроков; (iii) планирование расписания 
для транспортных средств и (iv) привязка водителей и других технических работ по обслуживанию транспортного 
средства.

Кроме того, наблюдаются некоторые теоретические результаты в области проектирования пути и планирования 
маршрута. Томас Родехеффер предложил догадку для симметричного кратчайшего пути в таблице маршрутизации. 
В своей работе \cite{rodeheffer2013symmetric} он описывает таблицу маршрутизации для симметричного кратчайшего 
пути, и представляет контрпримеры к выдвигаемой гипотезе: каждая возможная симметричная таблица маршрутизации 
кратчайшего пути может быть выбраны по некоторому ребру.

Дэниел Деллинг и соавторы предложили метод раундов для маршрутизации общественного транспорта. В статье 
\cite{delling2014round} авторы исследуют задачу вычисления всех Парето-оптимальных рейсов в динамичной 
транзитной сети общественного транспорта и представляют метод раундов для общественного транспорта 
названный RAPTOR.

Другая работа \cite{delling2015customizable} объясняет конфигурируемое планирование в дорожной сети. В 
данной статье авторы предлагают ядро маршрутизации для вычисления направления движения в крупных дорожных 
сетях. Также Дэниел Деллинг и соавторы, в статье \cite{delling2015public} предлагают метод маркировки 
общественного транспорта, как решение задачи планирования для транспортных сетей общественного 
пользования.

Иттай Абрахам и соавторы в статье \cite{abraham2013alternative} предлагают альтернативные маршруты для 
дорожной сети. В статье авторы исследуют проблему поиска хороших альтернатив маршрутов в дорожной сети. 
Они ищут маршруты, которые (i) существенно отличаются от кратчайшего пути, (ii) имеют небольшое протяжение 
и (iii) являются локально оптимальными.

Линг-Юин Вей и соавторы в работе \cite{wei2012constructing} предлагают RICK -- алгоритм для построения 
распространенных маршрутов из неопределенных траекторий используя информацию о последовательности локаций
и временных интервалов.

Тим Двайер и Лев Нахмансон в работе \cite{dwyer2009fast} предложили быстрый метод узловой маршрутизации 
для больших графов. В данной статье были предложены и обсуждены используемые два метода для достижения 
более быстрой узловой маршрутизации с использованием приближенных методов для поиска кратчайшего пути.

В дипломной работе \cite{bib:22} автором рассматривается проблема построения матрицы корреспонденций для 
транспортной сети на примере города Владивостока. Рассмотрены различные математические модели определения 
корреспонденций и описана их теоретическая база, а также разработка алгоритмов на их основе.

В книге \cite{bib:23} излагается материал от теории экономического равновесия до математический модели 
транспортных потоков, которые могут пригодиться при создании/модернизации транспортной системы. Представлено 
на рассмотрение большое количество моделей от макроскопических, например как модель Танака, до 
микроскопических, таких как модели клеточных автоматов. Также в книге представлен новый теоретический базис 
для развития интеллектуальных транспортных технологий.

В статье <<О возможной динамике в модели расчета матрицы корреспонденций (А.~Дж.~Вильсона)>>\cite{bib:24} 
проводится исследование динамики макросистем основанной на эргодической марковской цепи. Основу работы 
составляет исследование равновесия данной макросистемы.

Вернек и соавторы в работе \cite{bib:25} рассматривают проблему планирования перемещения в общественном 
транспорте. Авторы предлагают простые и эффективные алгоритмы решения проблем множества возникающих проблем.
В данной работе носит теоретическое характе и приводит теоретическую базу для используемых алгоритмов, а 
также представляет сравнение их эффективности.

В работе \cite{bib:27} представляют методы построения маршрутов в режиме реального времени из любой точки 
города в любую другую. В работе представлено общее описание разработанной системы, её математическое 
описание, а также результаты испытаний и сравнение с другими базовыми моделями.

В статье \cite{bib:28} авторы предлагают разработанную систему Allboard, которая будет использовать данные 
от мобильных операторов, для определения остановочных пунктов, а также предлагают на примере оптимальную 
транспортную сеть с последующим обоснованием. 

Авторы статьи \cite{bib:29} рассматривают проблему многокритериальной оптимизации существующей транспортных 
сетей, а также предлагают несколько подходов для её решения. Основной упор делается на разработанную 
оптимизационную модель.

В документе \cite{bib:30} даётся подробное описание проведенных работа по анализу текущей сети общественного 
транспорта городов Новой Зеландии. Документ описывает основные проблемы, методы тестирования и сравнения, 
описывает текущее состояние на момент проведения анализа транспортной структуры городов (2009) и предлагает 
возможные решения и рекомендации по решению возникших проблем. В целом данный документ является отличным 
справочным материалом по существующим методиками анализа транспортных сетей.

В данных статьях \cite{bib:31,bib:32,bib:34} авторы дают анализ существующих проблем связанным с 
общественным транспортом и гражданским транспортом. В первой работе основной упор идёт на динамику изменения 
пассажиропотока по различным видам общественного транспорта, а вторая фокусируется на моделировании и 
путях решения транспортных проблем. Третья же работа рассматривает основные проблемы и даёт оценку 
современному состоянию транспортной системы. Статья \cite{bib:39} имеет в корне тот же основной 
посыл, но фокусируется в основном только на автомобильном транспорта. Также к семейству этих статей можно и 
отнести \cite{bib:40}, которая посвящена проблематике формирования современных транспортных путей и 
модернизации текущей транспортной инфраструктуры.

Статьи \cite{bib:35,bib:36} в основном фокусируется на оптимизации транспорта, но в первой уклон в основном 
на теоретические аспекты оптимизации управления, а вторая подходит со стороны создания системы принятия 
решений.

Автор статьи \cite{bib:33} фокусирует основное внимание на геоинформационных системах для транспорта. 
В статье представлен краткий обзор особенностей технологий геоинформационных систем для применения данных 
систем в транспортном секторе. Также тут рассмотрены возможности моделирования и анализа данных с 
использованием программ семейства ArcGIS. Статьи \cite{bib:37,bib:38,bib:41} сфокусированы на математическом 
моделировании для транспорта. Каждая из них описывает свой подход к решению проблемы и предоставляет 
результаты проведённого моделирования.

Работы \cite{bib:42,bib:43} фокусируют своё внимание на эффективной организации дорожного движения. Если в 
первой работе авторы основной упор делают на исследование оценки качества, то вторая фокусируется на 
конкретных стратегиях. Обе статьи рассматривают одну и ту же проблему, но с разных точек зрения и сторон.

В книге Алгоритмы решения экстремальных задач\cite{bib:56} подробно излагается теория и численные методы 
для решения важных задач: от задач линейного программирования до ряда дискретных задач. Также сюда входят 
и транспортные задачи, которой посвящены главы с третьей по четвёртую, а также пятая глава, где 
рассматриваются многоэкстремальные задачи на графах. Изложение численных методов сопровождается разбором 
алгоритмов, а также у обращение внимания на эффективную организацию вычислительного процесса. Хотя книга 
и вышла в 77 году она не потеряла своей актуальности.

В статье Алгоритмы построения маршрута на карте по параметрам\cite{bib:46} предоставляется обоснование 
о необходимости создания алгоритмов построения маршрута по параметрам, для того чтобы он соответствовал 
необходимым предпочтениям жителей, а также о пользе использования генетических алгоритмах в задаче 
построения маршрутов.

В диссертационной работе <<Методы локального поиска для дискретных задач размещения>>\cite{bib:45} 
рассматриваются математические модели размещения, а конкретно дискретные оптимизационные задачи. Данная 
работа носит в основном теоретический характер и является отличным источником информации о эвристических 
методах и их теоретической базе.

В статье <<Формирование оптимальных маршрутов в мобильных сетях на основе модифицированного алгоритма 
Дейкстры>>\cite{bib:55} представлен модифицированный алгоритм Дейкстры. Модификация предложенная в статье 
предлагает учитывать динамику загруженности сети, что было бы неплохо для динамического построения 
актуальных маршрутных сетей транспорта.

В книге Алгоритмы\cite{bib:47} подробно излагаются основные методы построения и анализа эффективных 
алгоритмов. Материал в книге довольно отличается от других изданий методом подачи информации -- баланс в 
математической строгости и использовании формальных подходов, а также в выборе освещаемых вопросов. 
Издание является наиболее свежим источником информации по алгоритмам читаемым студентам в университете Беркли.

Автор статьи <<Метаэвристические алгоритмы для задач комбинаторной оптимизации >>\cite{bib:48} описывает 
теоретическую базу метаэвристических алгоритмов и подробно рассматривает методы на их основе. Статья носит 
обзорных характер и предназначена для краткого ознакомления с метаэвристическими методами.

Автор статей \cite{bib:50,bib:51} описывает применение метода имитации отжига к задаче маршрутизации 
транспорта, а также производит сравнение с другими эвристическими методами и показывает, что метод 
используемый в статье даёт меньшую погрешность.

В книге <<Современные алгоритмы поисковой оптимизации>>\cite{bib:52} автор подробно изложил современные 
стохастические алгоритмы решения однокритериальной задачи оптимизации, а также методы повышения 
эффективности этих алгоритмов. Также в данной учебном пособии рассматривается задача многокритериальной 
оптимизации и алгоритмы для её решения.

В книге <<Теория алгоритмов>>\cite{bib:53} предоставляется информация по основным вопросам разработки и 
анализа приближенных алгоритмов для задач оптимизации. Рассмотрены методы построения алгоритмов 
локального поиска и метаэвристики, а также основное внимание уделено математическим методам решения задач 
и методам анализа их вычислительной сложности.

В работах \cite{bib:54,bib:57} автор приводит обзор методов для решения NP-трудных задач, рассматриваются 
общие схемы алгоритмов. Особое внимание уделено математическому аппарату рассматриваемых алгоритмов. 
Если работа \cite{bib:54} носит более общих характер, то \cite{bib:57} рассматривает более узконе 
направление -- методы локального поиска с чередующимися окрестностями.

\section{Требования к решаемой задаче}
Таким образом, если рассматривать задачу поддержки принятия решений по совершенствованию маршрутов 
общественного транспорта с точки зрения (а) анализа существующих маршрутов на предмет удовлетворения 
спроса и (б) модификации существующих (через предложение новых вариантов маршрутов) с целью удовлетворения 
спроса жителей (уменьшение среднего времени пешего подхода до остановки и уменьшение времени поездки), то 
рассмотренные системы не решают сформулированные задачи и имеют следующие недостатки: (а) не учитывают 
предпочтения жителей по перемещениям в современной городской среде; (б) не адаптированы к работе с 
большими данными \cite{bib:20,bib:20.2}.

Для решения задачи предлагается подход, состоящий из следующих шагов. 
\begin{enumerate}
    \item Сбор и/или моделирование геораспределенных данных о перемещении жителей в городе.
    \item Кластеризация полученных данных с целью выявления узлов (кандидаты остановочных пунктов) для 
        включения в маршруты сети.
    \item Построение вариантов сетей маршрутов общественного транспорта.
    \begin{enumerate}
        \item Задание характеристик проектируемой сети и функции, определяющей эффективность 
            функционирования сети.
        \item Формирование начального варианта сети маршрутов общественного транспорта.
    \end{enumerate}
    \item Модификация начального варианта сети маршрутов общественного транспорта (генерация 
        альтернативных сетей и их сравнение по критерию минимума функции затрат).
    \item Определение эффективности каждого варианта сети.
\end{enumerate}
Следует отметить, что данный подход не противоречит существующим практикам построения маршрутов, но 
обеспечивает реализацию 1-3 шагов в автоматическом режиме. Тогда как в существующих методиках \cite{bib:9} 
эти этапы не автоматизированы. Пользователю предлагается либо вручную задать матрицу корреспонденций, 
либо загрузить готовую маршрутную сеть.

\section{Заключение}
В данной главе было рассмотрено общее состояние существующей проблемы в транспортной инфраструктуре. 
Описаны существующие программные продукты частично решающие данную проблему в полуавтоматическом режиме, но 
требующие вмешательства транспортного инженера для проектирования транспортной сети. Также рассмотрена 
литература по современным исследованиям в данной области и методам предлагаемых в них. В результате 
сформирован подход органично вписывающийся в существующую систему построения для решения поставленной задачи.